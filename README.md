# Projeto_SBL
Script do banco.
-- MySQL Script generated by MySQL Workbench
-- Sat Jul  7 14:13:16 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Usuario_escola`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Usuario_escola` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Usuario_escola` (
  `idUsuario_escola` INT NOT NULL AUTO_INCREMENT,
  `Login` VARCHAR(45) NOT NULL,
  `Senha` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idUsuario_escola`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Escola`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Escola` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Escola` (
  `idEscola` INT NOT NULL AUTO_INCREMENT,
  `Nome` VARCHAR(45) NOT NULL,
  `CNPJ` VARCHAR(45) NOT NULL,
  `Endereco` VARCHAR(45) NOT NULL,
  `Usuario_escola_idUsuario_escola` INT NOT NULL,
  PRIMARY KEY (`idEscola`, `Usuario_escola_idUsuario_escola`),
  INDEX `fk_Escola_Usuario_escola1_idx` (`Usuario_escola_idUsuario_escola` ASC),
  CONSTRAINT `fk_Escola_Usuario_escola1`
    FOREIGN KEY (`Usuario_escola_idUsuario_escola`)
    REFERENCES `mydb`.`Usuario_escola` (`idUsuario_escola`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Lista_Ind`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Lista_Ind` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Lista_Ind` (
  `idLista_Ind` BIGINT NOT NULL AUTO_INCREMENT,
  `Nivel` VARCHAR(45) NOT NULL,
  `Serie` VARCHAR(45) NOT NULL,
  `Ano` VARCHAR(45) NOT NULL,
  `Escola_idEscola` INT NOT NULL,
  `Preco_Sugerido_idPreco` BIGINT NOT NULL,
  PRIMARY KEY (`idLista_Ind`, `Escola_idEscola`, `Preco_Sugerido_idPreco`),
  INDEX `fk_Lista_Ind_Escola1_idx` (`Escola_idEscola` ASC),
  INDEX `fk_Lista_Ind_Preco_Sugerido1_idx` (`Preco_Sugerido_idPreco` ASC),
  CONSTRAINT `fk_Lista_Ind_Escola1`
    FOREIGN KEY (`Escola_idEscola`)
    REFERENCES `mydb`.`Escola` (`idEscola`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Lista_Ind_Preco_Sugerido1`
    FOREIGN KEY (`Preco_Sugerido_idPreco`)
    REFERENCES `mydb`.`Preco_Sugerido` (`idPreco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Responsavel`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Responsavel` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Responsavel` (
  `CPF` BIGINT NOT NULL,
  `Nome` VARCHAR(45) NOT NULL,
  `Telefone` VARCHAR(45) NOT NULL,
  `Email` VARCHAR(45) NOT NULL,
  `Endereco` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CPF`),
  UNIQUE INDEX `CPF_UNIQUE` (`CPF` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Preco_Sugerido`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Preco_Sugerido` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Preco_Sugerido` (
  `idPreco` BIGINT NOT NULL AUTO_INCREMENT,
  `Preco` FLOAT NOT NULL,
  PRIMARY KEY (`idPreco`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Livro`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Livro` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Livro` (
  `ISBN` BIGINT NOT NULL AUTO_INCREMENT,
  `Titulo` VARCHAR(45) NOT NULL,
  `Autor` VARCHAR(45) NOT NULL,
  `Editora` VARCHAR(45) NOT NULL,
  `Ano` VARCHAR(45) NOT NULL,
  `Edicao` VARCHAR(45) NOT NULL,
  `Tipo` VARCHAR(45) NOT NULL,
  `Preco_Sugerido_idPreco` BIGINT NOT NULL,
  `Lista_Ind_idLista_Ind` BIGINT NOT NULL,
  PRIMARY KEY (`ISBN`, `Preco_Sugerido_idPreco`, `Lista_Ind_idLista_Ind`),
  INDEX `fk_Livro_Preco_Sugerido1_idx` (`Preco_Sugerido_idPreco` ASC),
  INDEX `fk_Livro_Lista_Ind1_idx` (`Lista_Ind_idLista_Ind` ASC),
  CONSTRAINT `fk_Livro_Preco_Sugerido1`
    FOREIGN KEY (`Preco_Sugerido_idPreco`)
    REFERENCES `mydb`.`Preco_Sugerido` (`idPreco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Livro_Lista_Ind1`
    FOREIGN KEY (`Lista_Ind_idLista_Ind`)
    REFERENCES `mydb`.`Lista_Ind` (`idLista_Ind`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Exemplar`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Exemplar` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Exemplar` (
  `idExemplar` BIGINT NOT NULL AUTO_INCREMENT,
  `Dobra` TINYINT NOT NULL,
  `Anotacao` TINYINT NOT NULL,
  `Situacao` VARCHAR(45) NOT NULL,
  `Entrega` VARCHAR(45) NOT NULL,
  `Responsavel_CPF` BIGINT NOT NULL,
  `Livro_ISBN` BIGINT NOT NULL,
  `Livro_Preco_Sugerido_idPreco` BIGINT NOT NULL,
  PRIMARY KEY (`idExemplar`, `Responsavel_CPF`, `Livro_ISBN`, `Livro_Preco_Sugerido_idPreco`),
  INDEX `fk_Exemplar_Responsavel1_idx` (`Responsavel_CPF` ASC),
  INDEX `fk_Exemplar_Livro1_idx` (`Livro_ISBN` ASC, `Livro_Preco_Sugerido_idPreco` ASC),
  CONSTRAINT `fk_Exemplar_Responsavel1`
    FOREIGN KEY (`Responsavel_CPF`)
    REFERENCES `mydb`.`Responsavel` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Exemplar_Livro1`
    FOREIGN KEY (`Livro_ISBN` , `Livro_Preco_Sugerido_idPreco`)
    REFERENCES `mydb`.`Livro` (`ISBN` , `Preco_Sugerido_idPreco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Usuario` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Usuario` (
  `idUsuario` INT NOT NULL AUTO_INCREMENT,
  `Login` VARCHAR(45) NOT NULL,
  `Senha` VARCHAR(45) NOT NULL,
  `Responsavel_CPF` BIGINT NOT NULL,
  PRIMARY KEY (`idUsuario`, `Responsavel_CPF`),
  INDEX `fk_Usuario_Responsavel1_idx` (`Responsavel_CPF` ASC),
  UNIQUE INDEX `idUsuario_UNIQUE` (`idUsuario` ASC),
  CONSTRAINT `fk_Usuario_Responsavel1`
    FOREIGN KEY (`Responsavel_CPF`)
    REFERENCES `mydb`.`Responsavel` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

